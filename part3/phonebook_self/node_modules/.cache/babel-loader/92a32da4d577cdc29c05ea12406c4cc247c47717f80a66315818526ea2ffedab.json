{"ast":null,"code":"import _slicedToArray from\"/home/jack/Desktop/Programming/repos/full_stack_open/part3/phonebook_self/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useState,useEffect}from'react';import Display from\"./components/Display\";import Filter from\"./components/Filter\";import Form from\"./components/Form\";import Notification from\"./components/Notification\";import dataUtil from\"./service/dataUtil\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredPersons=_useState4[0],setFilteredPersons=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),onFilter=_useState6[0],setOnFilter=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),newName=_useState10[0],setNewName=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),newPhone=_useState12[0],setNewPhone=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),notification=_useState14[0],setNotification=_useState14[1];var showPersons=onFilter?filteredPersons:persons;useEffect(function(){dataUtil.getAll().then(function(allpeople){setPersons(allpeople);});},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();if(persons.some(function(x){return x.name===newName;})){if(window.confirm(\"\".concat(newName,\" already exists, are you sure you want to replace the number\"))){var id=persons.find(function(x){return x.name===newName;}).id;dataUtil.update(id,{name:newName,number:newPhone}).then(function(person){setPersons(persons.map(function(x){return x.id===id?person:x;}));setNewPhone('');setNewName('');}).catch(function(){setNotification(\"\".concat(newName,\" does not exist in phonebook\"));});setTimeout(function(){setNotification(\"\");},3000);}}else{dataUtil.add({name:newName,number:newPhone}).then(function(person){setPersons(persons.concat(person));setNewPhone('');setNewName('');setNotification(\"Succesfully added \".concat(newName));setTimeout(function(){setNotification(\"\");},3000);}).catch(function(error){alert(\"You need to add a number\");console.log(error);});}};var handleChange=function handleChange(setter){return function(event){setter(event.target.value);};};var handleFilter=function handleFilter(event){var newFilter=event.target.value;if(newFilter===''){setOnFilter(false);}else{setOnFilter(true);setFilteredPersons(persons.filter(function(person){return person.name.toLowerCase().startsWith(newFilter.toLowerCase());}));}setFilter(newFilter);};var handleDelete=function handleDelete(id){return function(e){if(window.confirm(\"Are you sure you want to delete\")){dataUtil.del(id).then(function(r){dataUtil.getAll().then(function(people){setPersons(people);});}).catch(function(){alert(\"Name doesn't exist\");});}};};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notification}),/*#__PURE__*/_jsx(Filter,{filter:filter,handleFilter:handleFilter}),/*#__PURE__*/_jsx(Form,{newName:newName,newPhone:newPhone,handleSubmit:handleSubmit,handleChange:handleChange,setNewName:setNewName,setNewPhone:setNewPhone}),/*#__PURE__*/_jsx(Display,{phonebook:showPersons,handleDelete:handleDelete})]});};export default App;","map":{"version":3,"names":["axios","useState","useEffect","Display","Filter","Form","Notification","dataUtil","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","filteredPersons","setFilteredPersons","_useState5","_useState6","onFilter","setOnFilter","_useState7","_useState8","filter","setFilter","_useState9","_useState10","newName","setNewName","_useState11","_useState12","newPhone","setNewPhone","_useState13","_useState14","notification","setNotification","showPersons","getAll","then","allpeople","handleSubmit","event","preventDefault","some","x","name","window","confirm","concat","id","find","update","number","person","map","catch","setTimeout","add","error","alert","console","log","handleChange","setter","target","value","handleFilter","newFilter","toLowerCase","startsWith","handleDelete","e","del","r","people","children","message","phonebook"],"sources":["/home/jack/Desktop/Programming/repos/full_stack_open/part3/phonebook_self/src/App.js"],"sourcesContent":["import axios from \"axios\"\nimport { useState, useEffect } from 'react'\nimport Display from \"./components/Display\"\nimport Filter from \"./components/Filter\"\nimport Form from \"./components/Form\"\nimport Notification from \"./components/Notification\"\nimport dataUtil from \"./service/dataUtil\"\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [filteredPersons, setFilteredPersons] = useState([])\n  const [onFilter, setOnFilter] = useState(false)\n  const [filter, setFilter] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [notification, setNotification] = useState(\"\")\n  const showPersons = onFilter ? filteredPersons : persons\n\n\n  useEffect(() => {\n    dataUtil.getAll()\n    .then( allpeople => {\n      setPersons(allpeople)\n    })\n  }, [])\n\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    if (persons.some(x => x.name === newName)) {\n      if (window.confirm(`${newName} already exists, are you sure you want to replace the number`)) {\n        const id = persons.find(x => x.name === newName).id\n        dataUtil.update(id, {name: newName, number: newPhone})\n        .then(person => {\n          setPersons(persons.map(x => x.id === id ? person : x))\n          setNewPhone('')\n          setNewName('')\n        }).catch(() => {\n          setNotification(`${newName} does not exist in phonebook`)\n        })\n        \n        setTimeout(() => {\n          setNotification(\"\")\n        }, 3000)\n        \n      }\n    } else {\n      dataUtil.add({name: newName, number: newPhone})\n        .then(person => {\n          setPersons(persons.concat(person))\n          setNewPhone('')\n          setNewName('')\n          setNotification(`Succesfully added ${newName}`)\n          setTimeout(() => {\n            setNotification(\"\")\n          }, 3000)\n        }).catch(error => {\n          alert(\"You need to add a number\")\n          console.log(error)\n        })\n    }\n  }\n\n  const handleChange = (setter) => (event) => {\n    setter(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    const newFilter = event.target.value\n    if (newFilter === '') {\n      setOnFilter(false)\n    } else {\n      setOnFilter(true)\n      setFilteredPersons(persons.filter(person => person.name.toLowerCase().startsWith(newFilter.toLowerCase())))\n    }\n    setFilter(newFilter)\n  }\n\n  const handleDelete = (id) => (e) => {\n    if (window.confirm(\"Are you sure you want to delete\")) {\n        dataUtil.del(id)\n        .then(r => {\n            dataUtil.getAll().then((people) => {\n              setPersons(people)\n            })\n        }).catch(() => {\n            alert(\"Name doesn't exist\")\n        })\n      }\n    }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification}/>\n      <Filter filter={filter} handleFilter={handleFilter}/>\n      <Form newName={newName} newPhone={newPhone} handleSubmit={handleSubmit} handleChange={handleChange} setNewName={setNewName} setNewPhone={setNewPhone}/>\n      <Display phonebook={showPersons} handleDelete={handleDelete}/>\n    \n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}